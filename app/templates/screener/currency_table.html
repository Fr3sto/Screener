{% extends 'base.html' %}

{% block title %} Impulse Screener {% endblock %}

{% block content%}

<table class="table mt-5 table-bordered table-striped table-hover table-responsive">
    <thead class="table-dark">
        <tr>
            <th  rowspan="2">Name</th>
            {% for el in listTF %}
                <th colspan="2">{{el}} min</th>
            {% endfor %}
            <th width='10%'></th>
        </tr>
        <tr>
            {% for el in listTF %}
                <th>Have_Impulse</th>
            <th>Count_in_impulse</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for el in result %}
            <tr>
                <td>{{el.name}}</td>
                    {% for imp in el.impInfo%}
                    {% load my_color_filter %}
                        <td class="{{imp.impulse.isOpen|my_color_filter}}">
                            {% if imp.impulse.isOpen == 1%}
                                <a style='color:white' href={% url 'screener:test_view' el.name imp.TF%}>В импульсе</a>
                            {% else %}
                                <a style='color:black' href={% url 'screener:test_view' el.name imp.TF%}>Ожидаем</a>
                            {% endif%}
                        </td>
                        <td class="{{imp.count|filter_count_in_impulse}}">
                            {% if imp.count >= 20 %}
                                <p style="color:white">{{imp.count}}</p>
                            {% else %}
                                <p style="color:black">{{imp.count}}</p>
                            {%endif%}
                        </td>

                    {% endfor %}
                <td>
                    <button class="btn btn-primary">
                        <a style='color:white' href={% url 'screener:single_currency' el.name %}>Trading View</a>
                    </button>
                </td>
            </tr>
        {% endfor%}
    </tbody>
</table>
{% endblock %}